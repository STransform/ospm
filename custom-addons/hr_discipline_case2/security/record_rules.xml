<odoo>
    <!-- HR Access: HR can access all discipline cases -->
    <record id="rule_hr_access" model="ir.rule">
        <field name="name">HR Access to Discipline Cases</field>
        <field name="model_id" ref="model_employee_discipline_case"/>
        <field name="domain_force">[]</field> <!-- No restriction for HR -->
        <field name="groups" eval="[(4, ref('group_hr_manager'))]"/>
        <field name="perm_read">1</field>
        <field name="perm_write">1</field>
        <field name="perm_create">1</field>
        <field name="perm_unlink">1</field>
    </record>
   <odoo>
    <!-- Rule for HR to Access CEO-Approved Discipline Cases -->
    <record id="rule_hr_approved_cases" model="ir.rule">
        <field name="name">HR Access to CEO-Approved Cases</field>
        <field name="model_id" ref="model_employee_discipline_case"/>
        <field name="domain_force">[('ceo_decision', '=', 'approved')]</field>
        <field name="groups" eval="[(4, ref('group_hr_manager'))]"/>
        <field name="perm_read">1</field>
        <field name="perm_write">1</field>
        <field name="perm_create">1</field>
        <field name="perm_unlink">0</field>
    </record>
</odoo>

  <record id="rule_committee_access" model="ir.rule">
    <field name="name">Discipline Committee Access to Cases</field>
    <field name="model_id" ref="model_employee_discipline_case"/>
    <!-- Modify the domain to check for HR escalation to committee -->
    <field name="domain_force">[('hr_decision', '=', 'escalate_to_committee')]</field> 
    <field name="groups" eval="[(4, ref('group_discipline_committee'))]"/>
    <field name="perm_read">1</field>
    <field name="perm_write">1</field>
    <field name="perm_create">1</field>
    <field name="perm_unlink">0</field>
</record>

    
   <record id="rule_ceo_access" model="ir.rule">
    <field name="name">CEO Access to Discipline Cases</field>
    <field name="model_id" ref="model_employee_discipline_case"/>
    <!-- Domain ensures CEO can access cases escalated by the committee -->
    <field name="domain_force">[('committee_decision', '=', 'escalate_to_ceo')]</field>
    <field name="groups" eval="[(4, ref('group_ceo'))]"/>
    <field name="perm_read">1</field>
    <field name="perm_write">1</field>
    <field name="perm_create">1</field>
    <field name="perm_unlink">0</field>
</record>
    <!-- General Users (Accuser/Accused): Can only view their own cases -->
    <record id="rule_accuser_access" model="ir.rule">
        <field name="name">Accuser Access to Discipline Cases</field>
        <field name="model_id" ref="model_employee_discipline_case"/>
        <field name="domain_force">['|', ('accuser_id', '=', user.id), ('accused_employee_id', '=', user.id)]</field> <!-- Corrected domain -->
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        <field name="perm_read">1</field>
        <field name="perm_write">0</field>
        <field name="perm_create">0</field>
        <field name="perm_unlink">0</field>
    </record>

   <!-- Only accuser and accused see the discipline cases,Rule: General User (Accuser/Accused) Can View Initiated Cases -->
    <record id="rule_accuser_access" model="ir.rule">
        <field name="name">Accuser and Accused Access to Discipline Cases</field>
        <field name="model_id" ref="model_employee_discipline_case"/>
        <!-- Domain allows both accuser and accused to view the case -->
        <field name="domain_force">['|', ('accuser_id', '=', user.id), ('accused_employee_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        <field name="perm_read">1</field>
        <field name="perm_write">0</field>
        <field name="perm_create">0</field>
        <field name="perm_unlink">0</field>
    </record>
    

    <!-- Allow Administrator to access all discipline cases -->
    <record id="rule_admin_access" model="ir.rule">
        <field name="name">Admin Access to All Discipline Cases</field>
        <field name="model_id" ref="model_employee_discipline_case"/>
        <field name="domain_force">[]</field> <!-- No restriction for Admin -->
        <field name="groups" eval="[(4, ref('base.group_system'))]"/> <!-- Admin group -->
        <field name="perm_read">1</field>
        <field name="perm_write">1</field>
        <field name="perm_create">1</field>
        <field name="perm_unlink">1</field>
    </record>
</odoo>
